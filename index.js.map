{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\nexport const BASE_URL = 'https://pixabay.com/api/';\nexport const API_KEY = '46051705-d89a9592eef32bc9448824550';\n\n\nexport async function fetchImages(query, page = 1) {\n    try {\n        const response = await axios.get(BASE_URL, {\n            params: {\n            key: API_KEY,\n            q: query,\n            image_type: 'photo',\n            page: page,\n            per_page: 15,\n            orientation: 'horizontal',\n            safesearch: 'true'\n        }\n        });\n    \n        return response.data;\n    } catch (error) {\n        console.log(error);\n        throw error;\n    }\n}","export function renderImages(images) {\n    const gallery = document.querySelector('.gallery');\n    const markup = images.hits.map((image) => { // Используем hits вместо queries\n        return `<li class=\"gallery-query\">\n            <a class=\"gallery-link\" href=\"${image.largeImageURL}\">\n                <img class=\"gallery-img\"\n                    src=\"${image.webformatURL}\"\n                    data-source=\"${image.largeImageURL}\"\n                    alt=\"${image.tags}\"\n                    width=\"360\"  onclick=\"return false\">\n                <ul class=\"gallery-descr\">\n                    <li class=\"gallery-item\">\n                        <p class=\"gallery-item-descr\">Likes</p>\n                        <p class=\"gallery-value\">${image.likes}</p>\n                    </li>\n                    <li class=\"gallery-item\">\n                        <p class=\"gallery-item-descr\">Views</p>\n                        <p class=\"gallery-value\">${image.views}</p>\n                    </li>\n                    <li class=\"gallery-item\">\n                        <p class=\"gallery-item-descr\">Comments</p>\n                        <p class=\"gallery-value\">${image.comments}</p>\n                    </li>\n                    <li class=\"gallery-item\">\n                        <p class=\"gallery-item-descr\">Downloads</p>\n                        <p class=\"gallery-value\">${image.downloads}</p>\n                    </li>\n                </ul>\n            </a>\n        </li>`;\n    }).join('');\n    gallery.insertAdjacentHTML('beforeend', markup);\n};\n\nexport function showLoader() {\n    const loader = document.querySelector('.loader');\n    loader.classList.remove('visually-hidden');\n};\n\nexport function hideLoader() {\n    const loader = document.querySelector('.loader');\n    loader.classList.add('visually-hidden');\n};\n\nexport function showMore() {\n    const loadMore = document.querySelector('.load-more');\n    loadMore.classList.remove('visually-hidden');\n}\nexport function hideMore() {\n    const loadMore = document.querySelector('.load-more');\n    loadMore.classList.add('visually-hidden');\n}","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport { fetchImages } from \"./js/pixabay-api\";\nimport { renderImages, showLoader, hideLoader, showMore, hideMore } from \"./js/render-functions\";\n\nconst form = document.querySelector('.form');\nconst gallery = document.querySelector('.gallery');\nlet lightbox = null;\nlet page = 1;\nconst pagePer = 15;\nconst moreBtn = document.querySelector('.load-more');\n\nform.addEventListener('submit', async (event) => {\n    event.preventDefault();\n\n    const inputValue = form.elements.query.value.trim();\n    if (inputValue === '') {\n        iziToast.error({\n            title: '',\n            message: 'Sorry, there are no images matching your search query. Please try again!',\n            position: 'topRight',\n            backgroundColor: '#EF4040',\n            maxWidth: '432px',\n            messageColor: '#fff',\n            iconColor: '#fff'\n        });\n        return;\n    };\n    gallery.innerHTML = '';\n    page = 1;\n\n    try {\n        showLoader();\n        const images = await fetchImages(inputValue, page, pagePer);\n        renderImages(images);\n        lightbox = new SimpleLightbox('.gallery a').refresh();\n        hideLoader();\n\n        if (images.hits.length >= pagePer) {\n            showMore();\n        } else {\n            hideMore();\n        }\n        if (images.totalHits === 0) {\n            hideLoader(); // Прячем лоадер\n            iziToast.warning({\n                title: '',\n                message: 'No images matching your search query. Please try again!',\n                position: 'topRight',\n                backgroundColor: '#EF4040',\n                maxWidth: '432px',\n                messageColor: '#fff',\n                iconColor: '#fff'\n            });\n        }\n    } catch (error) {\n        console.log(error);\n        iziToast.error({\n            title: '',\n            message: 'Something went wrong. Please try again!',\n            position: 'topRight',\n            backgroundColor: '#EF4040',\n            maxWidth: '432px',\n            messageColor: '#fff',\n            iconColor: '#fff'\n        });\n    };\n});\n\nfunction smoothScroll() {\n    const { height: cardHeight } = document\n        .querySelector('.gallery-query')\n        .getBoundingClientRect();\n\n    window.scrollBy({\n        top: cardHeight * 2,\n        behavior: 'smooth',\n    });\n}\n\nmoreBtn.addEventListener('click', async () => {\n    page += 1;\n    const inputValue = form.elements.query.value.trim();\n    try {\n        showLoader();\n        const images = await fetchImages(inputValue, page, pagePer);\n        renderImages(images);\n        lightbox.refresh();\n\n        hideLoader();\n        smoothScroll();\n\n        if (images.hits.length < pagePer) {\n            hideMore();\n            iziToast.info({\n                title: '',\n                message: \"We're sorry, but you've reached the end of search results.\",\n                position: 'topRight',\n                backgroundColor: '#2196F3',\n                maxWidth: '432px',\n                messageColor: '#fff',\n                iconColor: '#fff'\n            });\n        }\n    } catch (error) {\n        console.log(error);\n        iziToast.error({\n            title: '',\n            message: 'Something went wrong. Please try again!',\n            position: 'topRight',\n            backgroundColor: '#EF4040',\n            maxWidth: '432px',\n            messageColor: '#fff',\n            iconColor: '#fff'\n        });\n    }\n})"],"names":["BASE_URL","API_KEY","fetchImages","query","page","axios","error","renderImages","images","gallery","markup","image","showLoader","hideLoader","showMore","hideMore","form","lightbox","pagePer","moreBtn","event","inputValue","iziToast","SimpleLightbox","smoothScroll","cardHeight"],"mappings":"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"}